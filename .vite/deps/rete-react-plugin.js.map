{
  "version": 3,
  "sources": ["../../../animFlex/graph/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js", "../../../animFlex/graph/node_modules/rete-react-plugin/src/renderer.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/utils.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/ConnectionWrapper.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/Connection.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/shared/utils.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/shared/drag.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/Control.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/vars.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/ref-component.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/refs/RefControl.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/refs/RefSocket.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/Node.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/components/Socket.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/classic/index.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/hooks.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/vars.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/styles.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/components/Item.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/components/Search.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/components/Menu.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/context-menu/index.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/node_modules/lodash.debounce/index.js", "../../../animFlex/graph/node_modules/rete-react-plugin/node_modules/usehooks-ts/dist/index.js", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/minimap/utils.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/minimap/components/MiniNode.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/minimap/components/MiniViewport.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/minimap/components/Minimap.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/minimap/index.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/reroute-pins/Pin.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/reroute-pins/index.tsx", "../../../animFlex/graph/node_modules/rete-react-plugin/src/presets/index.ts", "../../../animFlex/graph/node_modules/rete-react-plugin/src/index.tsx"],
  "sourcesContent": ["function _taggedTemplateLiteral(e, t) {\n  return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {\n    raw: {\n      value: Object.freeze(t)\n    }\n  }));\n}\nexport { _taggedTemplateLiteral as default };", "/* eslint-disable react/no-render-return-value */\nimport * as ReactDOM from 'react-dom'\n\nexport type Renderer = { mount: ReactDOM.Renderer, unmount: (container: HTMLElement) => void }\n\ntype CreateRoot = (container: Element | DocumentFragment) => any\n\nexport function getRenderer(props?: { createRoot?: CreateRoot }): Renderer {\n  const createRoot = props?.createRoot\n  const wrappers = new WeakMap<HTMLElement, HTMLElement>()\n\n  function getWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) return wrapper\n\n    const span = document.createElement('span')\n\n    container.appendChild(span)\n    return wrappers.set(container, span).get(container)!\n  }\n  function removeWrapper(container: HTMLElement) {\n    const wrapper = wrappers.get(container)\n\n    if (wrapper) wrapper.remove()\n    wrappers.delete(container)\n  }\n\n  if (createRoot) {\n    const roots = new WeakMap<HTMLElement>()\n\n    return {\n      mount: ((\n        element: React.DOMElement<React.DOMAttributes<any>, any>,\n        container: HTMLElement\n      ): Element => {\n        const wrapper = getWrapper(container)\n\n        if (!roots.has(wrapper)) {\n          roots.set(wrapper, createRoot(wrapper))\n        }\n        const root = roots.get(wrapper)\n\n        return root.render(element)\n      }) as ReactDOM.Renderer,\n      unmount: (container: HTMLElement) => {\n        const wrapper = getWrapper(container)\n        const root = roots.get(wrapper)\n\n        if (root) {\n          root.unmount()\n          roots.delete(wrapper)\n          removeWrapper(container)\n        }\n      }\n    }\n  }\n\n  return {\n    mount: ((element: React.DOMElement<React.DOMAttributes<any>, any>, container: HTMLElement): Element => {\n      return ReactDOM.render(element, getWrapper(container))\n    }) as ReactDOM.Renderer,\n    unmount: (container: HTMLElement) => {\n      ReactDOM.unmountComponentAtNode(getWrapper(container))\n      removeWrapper(container)\n    }\n  }\n}\n", "import * as React from 'react'\nimport { useEffect, useRef, useState } from 'react'\nimport { flushSync } from 'react-dom'\n\nexport function Root({ children, rendered }: { children: React.JSX.Element | null, rendered: () => void }) {\n  useEffect(() => {\n    rendered()\n  })\n\n  return children\n}\n\nexport function syncFlush() {\n  const ready = useRef(false)\n\n  useEffect(() => {\n    ready.current = true\n  }, [])\n\n  return {\n    apply(f: () => void) {\n      if (ready.current) {\n        queueMicrotask(() => {\n          flushSync(f)\n        })\n      } else {\n        f()\n      }\n    }\n  }\n}\n\nexport function useRete<T extends { destroy(): void }>(create: (el: HTMLElement) => Promise<T>) {\n  const [container, setContainer] = useState<null | HTMLElement>(null)\n  const editorRef = useRef<T>()\n  const [editor, setEditor] = useState<T | null>(null)\n  const ref = useRef(null)\n\n  useEffect(() => {\n    if (container) {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n        container.innerHTML = ''\n      }\n      void create(container).then(value => {\n        editorRef.current = value\n        setEditor(value)\n      })\n    }\n  }, [container, create])\n\n  useEffect(() => {\n    return () => {\n      if (editorRef.current) {\n        editorRef.current.destroy()\n      }\n    }\n  }, [])\n  useEffect(() => {\n    if (ref.current) {\n      setContainer(ref.current)\n    }\n  }, [ref.current])\n\n  return [ref, editor] as const\n}\n", "import * as React from 'react'\nimport { createContext, useContext, useEffect, useState } from 'react'\n\nimport { Position } from '../../../types'\nimport { syncFlush } from '../../../utils'\n\nexport type ConnectionContextValue = { start: Position | null, end: Position | null, path: null | string }\n\nexport const ConnectionContext = createContext<ConnectionContextValue>({\n  start: null,\n  end: null,\n  path: null\n})\n\ntype PositionWatcher = (cb: (value: Position) => void) => (() => void)\n\ntype Props = {\n  children: React.JSX.Element\n  start: Position | PositionWatcher\n  end: Position | PositionWatcher\n  path(start: Position, end: Position): Promise<null | string>\n}\n\nexport function ConnectionWrapper(props: Props) {\n  const { children } = props\n  const [computedStart, setStart] = useState<Position | null>(null)\n  const [computedEnd, setEnd] = useState<Position | null>(null)\n  const [path, setPath] = useState<string | null>(null)\n  const start = 'x' in props.start\n    ? props.start\n    : computedStart\n  const end = 'x' in props.end\n    ? props.end\n    : computedEnd\n  const flush = syncFlush()\n\n  useEffect(() => {\n    const unwatch1 = typeof props.start === 'function' && props.start(s => {\n      flush.apply(() => {\n        setStart(s)\n      })\n    })\n    const unwatch2 = typeof props.end === 'function' && props.end(s => {\n      flush.apply(() => {\n        setEnd(s)\n      })\n    })\n\n    return () => {\n      if (unwatch1) unwatch1()\n      if (unwatch2) unwatch2()\n    }\n  }, [])\n  useEffect(() => {\n    if (start && end) void props.path(start, end).then(p => {\n      flush.apply(() => {\n        setPath(p)\n      })\n    })\n  }, [start, end])\n\n  return (\n    <ConnectionContext.Provider value={{ start, end, path }}>\n      {children}\n    </ConnectionContext.Provider>\n  )\n}\n\nexport function useConnection() {\n  return useContext(ConnectionContext)\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { ClassicScheme } from '../types'\nimport { useConnection } from './ConnectionWrapper'\n\nconst Svg = styled.svg`\n    overflow: visible !important;\n    position: absolute;\n    pointer-events: none;\n    width: 9999px;\n    height: 9999px;\n`\n\nconst Path = styled.path<{ styles?: (props: any) => any }>`\n    fill: none;\n    stroke-width: 5px;\n    stroke: steelblue;\n    pointer-events: auto;\n    ${props => props.styles?.(props)}\n`\n\nexport function Connection(props: { data: ClassicScheme['Connection'] & { isLoop?: boolean }, styles?: () => any }) {\n  const { path } = useConnection()\n\n  if (!path) return null\n\n  return (\n    <Svg data-testid=\"connection\">\n      <Path\n        styles={props.styles}\n        d={path} />\n    </Svg>\n  )\n}\n", "export function copyEvent<T extends Event & Record<string, any>>(e: T) {\n  const newEvent = new (e.constructor as new(type: string) => T)(e.type)\n  let current = newEvent\n\n  // eslint-disable-next-line no-cond-assign\n  while (current = Object.getPrototypeOf(current)) {\n    const keys = Object.getOwnPropertyNames(current)\n\n    for (const k of keys) {\n      const item = newEvent[k]\n\n      if (typeof item === 'function') continue\n\n      Object.defineProperty(newEvent, k, { value: e[k] })\n    }\n  }\n\n  return newEvent\n}\n\nconst rootPrefix = '__reactContainer$'\n\ntype Keys = `${typeof rootPrefix}${string}` | '_reactRootContainer'\ntype ReactNode = { [key in Keys]?: unknown } & HTMLElement\n\nexport function findReactRoot(element: HTMLElement) {\n  let current: ReactNode | null = element as ReactNode\n\n  while (current) {\n    if (current._reactRootContainer || Object.keys(current).some(key => key.startsWith(rootPrefix))) return current\n    current = current.parentElement as ReactNode\n  }\n}\n", "import * as React from 'react'\n\nimport { Position } from '../types'\nimport { copyEvent, findReactRoot } from './utils'\n\ntype Translate = (dx: number, dy: number) => void\ntype StartEvent = { pageX: number, pageY: number }\n\nexport function useDrag(translate: Translate, getPointer: (e: StartEvent) => Position) {\n  return {\n    start(e: StartEvent) {\n      let previous = { ...getPointer(e) }\n\n      function move(moveEvent: MouseEvent) {\n        const current = { ...getPointer(moveEvent) }\n        const dx = current.x - previous.x\n        const dy = current.y - previous.y\n\n        previous = current\n\n        translate(dx, dy)\n      }\n      function up() {\n        window.removeEventListener('pointermove', move)\n        window.removeEventListener('pointerup', up)\n        window.removeEventListener('pointercancel', up)\n      }\n\n      window.addEventListener('pointermove', move)\n      window.addEventListener('pointerup', up)\n      window.addEventListener('pointercancel', up)\n    }\n  }\n}\n\nexport function useNoDrag(ref: React.MutableRefObject<HTMLElement | null>, disabled?: boolean) {\n  React.useEffect(() => {\n    const handleClick = (e: PointerEvent) => {\n      if (disabled) return\n\n      const root = findReactRoot(e.target as HTMLElement)\n      const target = React.version.startsWith('16')\n        ? document\n        : root\n\n      if (target) {\n        e.stopPropagation()\n        target.dispatchEvent(copyEvent(e))\n      }\n    }\n    const el = ref.current\n\n    el?.addEventListener('pointerdown', handleClick)\n\n    return () => {\n      el?.removeEventListener('pointerdown', handleClick)\n    }\n  }, [ref, disabled])\n}\n\nexport function NoDrag(props: { children: React.ReactNode, disabled?: boolean }) {\n  const ref = React.useRef<HTMLDivElement | null>(null)\n\n  useNoDrag(ref, props.disabled)\n\n  return <span ref={ref}>{props.children}</span>\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { Drag } from '../../../shared'\n\nconst Input = styled.input<{ styles?: (props: any) => any }>`\n  width: 100%;\n  border-radius: 30px;\n  background-color: white;\n  padding: 2px 6px;\n  border: 1px solid #999;\n  font-size: 110%;\n  box-sizing: border-box;\n  ${props => props.styles?.(props)}\n`\n\nexport function Control<N extends 'text' | 'number'>(props: { data: ClassicPreset.InputControl<N>, styles?: () => any }) {\n  const [value, setValue] = React.useState(props.data.value)\n  const ref = React.useRef(null)\n\n  Drag.useNoDrag(ref)\n\n  React.useEffect(() => {\n    setValue(props.data.value)\n  }, [props.data.value])\n\n  return (\n    <Input\n      value={value}\n      type={props.data.type}\n      ref={ref}\n      readOnly={props.data.readonly}\n      onChange={e => {\n        const val = (props.data.type === 'number'\n          ? +e.target.value\n          : e.target.value) as typeof props.data['value']\n\n        setValue(val)\n        props.data.setValue(val)\n      }}\n      styles={props.styles}\n    />\n  )\n}\n", "export const $nodecolor = 'rgba(110,136,255,0.8)'\nexport const $nodecolorselected = '#ffd92c'\nexport const $socketsize = 24\nexport const $socketmargin = 6\nexport const $socketcolor = '#96b38a'\nexport const $nodewidth = 180\n", "import * as React from 'react'\n\ntype RefUpdate = (ref: HTMLElement) => void\ntype BaseProps = { init: RefUpdate, unmount: RefUpdate } & Record<string, unknown>\n\n/**\n * Component for rendering various elements embedded in the React.js component tree.\n */\nexport function RefComponent<Props extends BaseProps>({ init, unmount, ...props }: Props) {\n  const ref = React.useRef<HTMLSpanElement>(null)\n\n  React.useEffect(() => {\n    const element = ref.current\n\n    return () => {\n      if (element) unmount(element)\n    }\n  }, [])\n  React.useEffect(() => {\n    if (ref.current) init(ref.current)\n  })\n\n  return <span {...props} ref={ref} />\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetControls, ReactArea2D } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  payload: ClassicPreset.Control\n}\n\nexport function RefControl<Scheme extends ClassicScheme>({ name, emit, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => {\n      emit({ type: 'render',\n        data: {\n          type: 'control',\n          element: ref,\n          payload: payload as GetControls<Scheme['Node']>\n        } })\n    }}\n    unmount={ref => {\n      emit({ type: 'unmount', data: { element: ref } })\n    }}\n  />\n}\n", "import * as React from 'react'\nimport { ClassicPreset, NodeId } from 'rete'\n\nimport { RefComponent } from '../../../../ref-component'\nimport { ClassicScheme, GetSockets, ReactArea2D, Side } from '../../types'\n\ntype Props<Scheme extends ClassicScheme> = {\n  name: string\n  emit: (props: ReactArea2D<Scheme>) => void\n  side: Side\n  nodeId: NodeId\n  socketKey: string\n  payload: ClassicPreset.Socket\n}\n\nexport function RefSocket<Scheme extends ClassicScheme>({ name, emit, nodeId, side, socketKey, payload, ...props }: Props<Scheme>) {\n  return <RefComponent\n    {...props}\n    className={name}\n    init={ref => {\n      emit({ type: 'render',\n        data: {\n          type: 'socket',\n          side,\n          key: socketKey,\n          nodeId,\n          element: ref,\n          payload: payload as GetSockets<Scheme['Node']>\n        } })\n    }}\n    unmount={ref => {\n      emit({ type: 'unmount', data: { element: ref } })\n    }}\n  />\n}\n", "import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { ClassicScheme, RenderEmit } from '../types'\nimport { $nodecolor, $nodecolorselected, $nodewidth, $socketmargin, $socketsize } from '../vars'\nimport { RefControl } from './refs/RefControl'\nimport { RefSocket } from './refs/RefSocket'\n\ntype NodeExtraData = { width?: number, height?: number }\n\nexport const NodeStyles = styled.div<NodeExtraData & { selected: boolean, styles?: (props: any) => any }>`\n    background: ${$nodecolor};\n    border: 2px solid #4e58bf;\n    border-radius: 10px;\n    cursor: pointer;\n    box-sizing: border-box;\n    width: ${props => Number.isFinite(props.width)\n    ? `${props.width}px`\n    : `${$nodewidth}px`};\n    height: ${props => Number.isFinite(props.height)\n    ? `${props.height}px`\n    : 'auto'};\n    padding-bottom: 6px;\n    position: relative;\n    user-select: none;\n    line-height: initial;\n    font-family: Arial;\n\n    &:hover {\n        background: lighten(${$nodecolor},4%);\n    }\n    ${props => props.selected && css`\n        background: ${$nodecolorselected};\n        border-color: #e3c000;\n    `}\n    .title {\n        color: white;\n        font-family: sans-serif;\n        font-size: 18px;\n        padding: 8px;\n    }\n    .output {\n        text-align: right;\n    }\n    .input {\n        text-align: left;\n    }\n    .output-socket {\n        text-align: right;\n        margin-right: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-socket {\n        text-align: left;\n        margin-left: -${$socketsize / 2 + $socketmargin}px;\n        display: inline-block;\n    }\n    .input-title,.output-title {\n        vertical-align: middle;\n        color: white;\n        display: inline-block;\n        font-family: sans-serif;\n        font-size: 14px;\n        margin: ${$socketmargin}px;\n        line-height: ${$socketsize}px;\n    }\n    .input-control {\n        z-index: 1;\n        width: calc(100% - ${$socketsize + 2 * $socketmargin}px);\n        vertical-align: middle;\n        display: inline-block;\n    }\n    .control {\n        display: block;\n        padding: ${$socketmargin}px ${$socketsize / 2 + $socketmargin}px;\n    }\n    ${props => props.styles?.(props)}\n`\n\nfunction sortByIndex<T extends [string, undefined | { index?: number }][]>(entries: T) {\n  entries.sort((a, b) => {\n    const ai = a[1]?.index || 0\n    const bi = b[1]?.index || 0\n\n    return ai - bi\n  })\n}\n\ntype Props<S extends ClassicScheme> = {\n  data: S['Node'] & NodeExtraData\n  styles?: () => any\n  emit: RenderEmit<S>\n}\nexport type NodeComponent<Scheme extends ClassicScheme> = (props: Props<Scheme>) => JSX.Element\n\nexport function Node<Scheme extends ClassicScheme>(props: Props<Scheme>) {\n  const inputs = Object.entries(props.data.inputs)\n  const outputs = Object.entries(props.data.outputs)\n  const controls = Object.entries(props.data.controls)\n  const selected = props.data.selected || false\n  const { id, label, width, height } = props.data\n\n  sortByIndex(inputs)\n  sortByIndex(outputs)\n  sortByIndex(controls)\n\n  return (\n    <NodeStyles\n      selected={selected}\n      width={width}\n      height={height}\n      styles={props.styles}\n      data-testid=\"node\"\n    >\n      <div className=\"title\" data-testid=\"title\">{label}</div>\n      {/* Outputs */}\n      {outputs.map(([key, output]) => output && <div className=\"output\" key={key} data-testid={`output-${key}`}>\n        <div className=\"output-title\" data-testid=\"output-title\">{output.label}</div>\n        <RefSocket\n          name=\"output-socket\"\n          side=\"output\"\n          socketKey={key}\n          nodeId={id}\n          emit={props.emit}\n          payload={output.socket}\n          data-testid=\"output-socket\"\n        />\n      </div>)}\n      {/* Controls */}\n      {controls.map(([key, control]) => {\n        return control\n          ? <RefControl\n            key={key}\n            name=\"control\"\n            emit={props.emit}\n            payload={control}\n            data-testid={`control-${key}`}\n          />\n          : null\n      })}\n      {/* Inputs */}\n      {inputs.map(([key, input]) => input && <div className=\"input\" key={key} data-testid={`input-${key}`}>\n        <RefSocket\n          name=\"input-socket\"\n          side=\"input\"\n          socketKey={key}\n          nodeId={id}\n          emit={props.emit}\n          payload={input.socket}\n          data-testid=\"input-socket\"\n        />\n        {input && (!input.control || !input.showControl)\n        && <div className=\"input-title\" data-testid=\"input-title\">{input.label}</div>\n        }\n        {input.control && input.showControl && (\n          <RefControl\n            key={key}\n            name=\"input-control\"\n            emit={props.emit}\n            payload={input.control}\n            data-testid=\"input-control\"\n          />\n        )\n        }\n      </div>)}\n    </NodeStyles>\n  )\n}\n", "import * as React from 'react'\nimport { ClassicPreset } from 'rete'\nimport styled from 'styled-components'\n\nimport { $socketcolor, $socketmargin, $socketsize } from '../vars'\n\nconst Styles = styled.div`\n    display: inline-block;\n    cursor: pointer;\n    border: 1px solid white;\n    border-radius: ${$socketsize / 2.0}px;\n    width: ${$socketsize}px;\n    height: ${$socketsize}px;\n    vertical-align: middle;\n    background: ${$socketcolor};\n    z-index: 2;\n    box-sizing: border-box;\n    &:hover {\n      border-width: 4px;\n    }\n    &.multiple {\n      border-color: yellow;\n    }\n`\n\nconst Hoverable = styled.div`\n    border-radius: ${($socketsize + $socketmargin * 2) / 2.0}px;\n    padding: ${$socketmargin}px;\n    &:hover ${Styles} {\n      border-width: 4px;\n    }\n`\n\nexport function Socket<T extends ClassicPreset.Socket>(props: { data: T }) {\n  return (\n    <Hoverable>\n      <Styles title={props.data.name} />\n    </Hoverable>\n  )\n}\n", "import * as React from 'react'\nimport { ClassicPreset, Scope } from 'rete'\nimport {\n  classicConnectionPath, getDOMSocketPosition,\n  loopConnectionPath, SocketPositionWatcher\n} from 'rete-render-utils'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Connection } from './components/Connection'\nimport { ConnectionWrapper } from './components/ConnectionWrapper'\nimport { Control } from './components/Control'\nimport { Node } from './components/Node'\nimport { Socket } from './components/Socket'\nimport {\n  ClassicScheme, ExtractPayload, ReactArea2D, RenderEmit\n} from './types'\nimport { AcceptComponent } from './utility-types'\n\nexport { Connection } from './components/Connection'\nexport { useConnection } from './components/ConnectionWrapper'\nexport { Control } from './components/Control'\nexport { Control as InputControl } from './components/Control'\nexport { Node, NodeStyles } from './components/Node'\nexport { RefControl } from './components/refs/RefControl'\nexport { RefSocket } from './components/refs/RefSocket'\nexport { Socket } from './components/Socket'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './types'\nexport * as vars from './vars'\n\ntype CustomizationProps<Schemes extends ClassicScheme> = {\n  node?: (data: ExtractPayload<Schemes, 'node'>) => AcceptComponent<typeof data['payload'], { emit: RenderEmit<Schemes> }> | null\n  connection?: (data: ExtractPayload<Schemes, 'connection'>) => AcceptComponent<typeof data['payload']> | null\n  socket?: (data: ExtractPayload<Schemes, 'socket'>) => AcceptComponent<typeof data['payload']> | null\n  control?: (data: ExtractPayload<Schemes, 'control'>) => AcceptComponent<typeof data['payload']> | null\n}\n\ntype ClassicProps<Schemes extends ClassicScheme, K> = {\n  socketPositionWatcher?: SocketPositionWatcher<Scope<never, [K]>>\n  customize?: CustomizationProps<Schemes>\n}\n\n/**\n * Classic preset for rendering nodes, connections, controls and sockets.\n */\nexport function setup<\n  Schemes extends ClassicScheme, K extends ReactArea2D<Schemes>\n>(props?: ClassicProps<Schemes, K>): RenderPreset<Schemes, K> {\n  const positionWatcher = typeof props?.socketPositionWatcher === 'undefined'\n    ? getDOMSocketPosition<Schemes, K>()\n    : props.socketPositionWatcher\n  const { node, connection, socket, control } = props?.customize || {}\n\n  return {\n    attach(plugin) {\n      positionWatcher.attach(plugin as unknown as Scope<never, [K]>)\n    },\n    // eslint-disable-next-line complexity\n    render(context, plugin) {\n      if (context.data.type === 'node') {\n        const parent = plugin.parentScope()\n        const Component = (node\n          ? node(context.data)\n          : Node) as typeof Node\n\n        return Component\n          && <Component\n            data={context.data.payload}\n            emit={data => void parent.emit(data as any)}\n          />\n      } else if (context.data.type === 'connection') {\n        const Component = (connection\n          ? connection(context.data)\n          : Connection) as typeof Connection\n        const payload = context.data.payload\n        const { sourceOutput, targetInput, source, target } = payload\n\n        return Component\n          && <ConnectionWrapper\n            start={context.data.start || (change => positionWatcher.listen(source, 'output', sourceOutput, change))}\n            end={context.data.end || (change => positionWatcher.listen(target, 'input', targetInput, change))}\n            path={async (start, end) => {\n              type FixImplicitAny = typeof plugin.__scope.produces | undefined\n              const response: FixImplicitAny = await plugin.emit({\n                type: 'connectionpath',\n                data: {\n                  payload,\n                  points: [start, end]\n                }\n              })\n\n              if (!response) return ''\n\n              const { path, points } = response.data\n              const curvature = 0.3\n\n              if (!path && points.length !== 2) throw new Error('cannot render connection with a custom number of points')\n              if (!path) return payload.isLoop\n                ? loopConnectionPath(points as [Position, Position], curvature, 120)\n                : classicConnectionPath(points as [Position, Position], curvature)\n\n              return path\n            }}\n          >\n            <Component data={context.data.payload} />\n          </ConnectionWrapper>\n      } else if (context.data.type === 'socket') {\n        const Component = (socket\n          ? socket(context.data)\n          : Socket) as typeof Socket\n\n        return Component && context.data.payload && <Component data={context.data.payload} />\n      } else if (context.data.type === 'control') {\n        const Component = control && context.data.payload\n          ? control(context.data)\n          : context.data.payload instanceof ClassicPreset.InputControl\n            ? Control\n            : null\n\n        return Component && <Component data={context.data.payload as any} />\n      }\n    }\n  }\n}\n", "import { useEffect, useRef } from 'react'\n\nexport function useDebounce(cb: () => void, timeout: number): [null | (() => void), () => void] {\n  const ref = useRef<ReturnType<typeof setTimeout>>()\n\n  function cancel() {\n    if (ref.current) {\n      clearTimeout(ref.current)\n    }\n  }\n  const func = () => {\n    cancel()\n\n    ref.current = setTimeout(() => {\n      cb()\n    }, timeout)\n  }\n\n  useEffect(() => cancel, [])\n\n  return [\n    func,\n    cancel\n  ]\n}\n", "\nexport const $contextColor = 'rgba(110,136,255,0.8)'\nexport const $contextColorLight = 'rgba(130, 153, 255, 0.8)'\nexport const $contextColorDark = 'rgba(69, 103, 255, 0.8)'\nexport const $contextMenuRound = '5px'\nexport const $width = 120\n", "import styled from 'styled-components'\n\nimport { $contextColor, $contextColorDark, $contextColorLight, $contextMenuRound } from './vars'\n\nexport const CommonStyle = styled.div`\n  color: #fff;\n  padding: 4px;\n  border-bottom: 1px solid ${$contextColorDark};\n  background-color: ${$contextColor};\n  cursor: pointer;\n  width: 100%;\n  position: relative;\n  &:first-child {\n    border-top-left-radius: ${$contextMenuRound};\n    border-top-right-radius: ${$contextMenuRound};\n  }\n  &:last-child {\n    border-bottom-left-radius: ${$contextMenuRound};\n    border-bottom-right-radius: ${$contextMenuRound};\n  }\n  &:hover {\n    background-color: ${$contextColorLight};\n  }\n`\n", "import * as React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\n\nexport const ItemStyle = styled(CommonStyle) <{ hasSubitems?: boolean }>`\n    ${props => props.hasSubitems && css`&:after {\n    content: 'â–º';\n    position: absolute;\n    opacity: 0.6;\n    right: 5px;\n    top: 5px;\n    }`}\n`\n\nexport const SubitemStyles = styled.div`\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: ${$width}px;\n`\n\ntype Props = {\n  data: Item\n  delay: number\n  hide(): void\n  children: React.ReactNode\n  components?: Pick<Customize, 'item' | 'subitems'>\n}\n\nexport function ItemElement(props: Props) {\n  const [visibleSubitems, setVisibleSubitems] = React.useState(false)\n  const setInvisibile = React.useCallback(() => {\n    setVisibleSubitems(false)\n  }, [setVisibleSubitems])\n  const [hide, cancelHide] = useDebounce(setInvisibile, props.delay)\n  const Component = props.components?.item?.(props.data) || ItemStyle\n  const Subitems = props.components?.subitems?.(props.data) || SubitemStyles\n\n  return <Component\n    onClick={e => {\n      e.stopPropagation()\n      props.data.handler()\n      props.hide()\n    }}\n    hasSubitems={Boolean(props.data.subitems)}\n    onPointerDown={e => {\n      e.stopPropagation()\n    }}\n    onPointerOver={() => {\n      cancelHide()\n      setVisibleSubitems(true)\n    }}\n    onPointerLeave={() => {\n      if (hide) hide()\n    }}\n    data-testid=\"context-menu-item\"\n  >\n    {props.children}\n    {props.data.subitems && visibleSubitems && (\n      <Subitems>\n        {props.data.subitems.map(item => (\n          <ItemElement\n            key={item.key}\n            data={item}\n            delay={props.delay}\n            hide={props.hide}\n            components={props.components}\n          >{item.label}</ItemElement>\n        ))}\n      </Subitems>\n    )}\n  </Component>\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { ComponentType } from '../types'\n\nexport const SearchInput = styled.input`\n  color: white;\n  padding: 1px 8px;\n  border: 1px solid white;\n  border-radius: 10px;\n  font-size: 16px;\n  font-family: serif;\n  width: 100%;\n  box-sizing: border-box;\n  background: transparent;\n`\n\nexport function Search(props: { value: string, onChange(value: string): void, component?: ComponentType }) {\n  const Component = props.component || SearchInput\n\n  return (\n    <Component\n      value={props.value}\n      onInput={e => {\n        props.onChange((e.target as HTMLInputElement).value)\n      }}\n      onPointerDown={e => {\n        e.stopPropagation()\n      }}\n      data-testid=\"context-menu-search-input\"\n    />\n  )\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDebounce } from '../hooks'\nimport { CommonStyle } from '../styles'\nimport { Customize, Item } from '../types'\nimport { $width } from '../vars'\nimport { ItemElement } from './Item'\nimport { Search } from './Search'\n\nexport const Styles = styled.div`\n  padding: 10px;\n  width: ${$width}px;\n  margin-top: -20px;\n  margin-left: -${$width / 2}px;\n`\n\ntype Props = {\n  items: Item[]\n  delay: number\n  searchBar?: boolean\n  onHide(): void\n  components?: Customize\n}\n\nexport function Menu(props: Props) {\n  const [hide, cancelHide] = useDebounce(props.onHide, props.delay)\n  const [filter, setFilter] = React.useState('')\n  const filterRegexp = new RegExp(filter, 'i')\n  const filteredList = props.items.filter(item => item.label.match(filterRegexp))\n  const Component = props.components?.main?.() || Styles\n  const Common = props.components?.common?.() || CommonStyle\n\n  return <Component\n    onMouseOver={() => {\n      cancelHide()\n    }}\n    onMouseLeave={() => hide && hide()}\n    onWheel={e => {\n      e.stopPropagation()\n    }}\n    data-testid=\"context-menu\"\n  >\n    {props.searchBar && (\n      <Common>\n        <Search value={filter} onChange={setFilter} component={props.components?.search?.()} />\n      </Common>\n    )}\n    {filteredList.map(item => {\n      return <ItemElement\n        key={item.key}\n        data={item}\n        delay={props.delay}\n        hide={props.onHide}\n        components={props.components}\n      >\n        {item.label}\n      </ItemElement>\n    })}\n  </Component>\n}\n", "import * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Menu } from './components/Menu'\nimport { ContextMenuRender, Customize } from './types'\n\nexport { ItemStyle as Item, SubitemStyles as Subitems } from './components/Item'\nexport { Styles as Menu } from './components/Menu'\nexport { SearchInput as Search } from './components/Search'\nexport { CommonStyle as Common } from './styles'\n\ntype Props = {\n  delay?: number\n  customize?: Customize\n}\n\n/**\n * Preset for rendering context menu.\n */\nexport function setup<Schemes extends BaseSchemes, K extends ContextMenuRender>(props?: Props): RenderPreset<Schemes, K> {\n  const delay = typeof props?.delay === 'undefined'\n    ? 1000\n    : props.delay\n\n  return {\n    render(context) {\n      if (context.data.type === 'contextmenu') {\n        return <Menu\n          items={context.data.items}\n          delay={delay}\n          searchBar={context.data.searchBar}\n          onHide={context.data.onHide}\n          components={props?.customize}\n        />\n      }\n    }\n  }\n}\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n", "import { useState, useCallback, useLayoutEffect, useEffect, useRef, useMemo } from 'react';\nimport debounce from 'lodash.debounce';\n\n// src/useBoolean/useBoolean.ts\nfunction useBoolean(defaultValue = false) {\n  if (typeof defaultValue !== \"boolean\") {\n    throw new Error(\"defaultValue must be `true` or `false`\");\n  }\n  const [value, setValue] = useState(defaultValue);\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return { value, setValue, setTrue, setFalse, toggle };\n}\nvar useIsomorphicLayoutEffect = typeof window !== \"undefined\" ? useLayoutEffect : useEffect;\n\n// src/useEventListener/useEventListener.ts\nfunction useEventListener(eventName, handler, element, options) {\n  const savedHandler = useRef(handler);\n  useIsomorphicLayoutEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n  useEffect(() => {\n    const targetElement = (element == null ? void 0 : element.current) ?? window;\n    if (!(targetElement && targetElement.addEventListener))\n      return;\n    const listener = (event) => {\n      savedHandler.current(event);\n    };\n    targetElement.addEventListener(eventName, listener, options);\n    return () => {\n      targetElement.removeEventListener(eventName, listener, options);\n    };\n  }, [eventName, element, options]);\n}\n\n// src/useClickAnyWhere/useClickAnyWhere.ts\nfunction useClickAnyWhere(handler) {\n  useEventListener(\"click\", (event) => {\n    handler(event);\n  });\n}\nfunction useCopyToClipboard() {\n  const [copiedText, setCopiedText] = useState(null);\n  const copy = useCallback(async (text) => {\n    if (!(navigator == null ? void 0 : navigator.clipboard)) {\n      console.warn(\"Clipboard not supported\");\n      return false;\n    }\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText(text);\n      return true;\n    } catch (error) {\n      console.warn(\"Copy failed\", error);\n      setCopiedText(null);\n      return false;\n    }\n  }, []);\n  return [copiedText, copy];\n}\nfunction useCounter(initialValue) {\n  const [count, setCount] = useState(initialValue ?? 0);\n  const increment = useCallback(() => {\n    setCount((x) => x + 1);\n  }, []);\n  const decrement = useCallback(() => {\n    setCount((x) => x - 1);\n  }, []);\n  const reset = useCallback(() => {\n    setCount(initialValue ?? 0);\n  }, [initialValue]);\n  return {\n    count,\n    increment,\n    decrement,\n    reset,\n    setCount\n  };\n}\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (delay === null) {\n      return;\n    }\n    const id = setInterval(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearInterval(id);\n    };\n  }, [delay]);\n}\n\n// src/useCountdown/useCountdown.ts\nfunction useCountdown({\n  countStart,\n  countStop = 0,\n  intervalMs = 1e3,\n  isIncrement = false\n}) {\n  const {\n    count,\n    increment,\n    decrement,\n    reset: resetCounter\n  } = useCounter(countStart);\n  const {\n    value: isCountdownRunning,\n    setTrue: startCountdown,\n    setFalse: stopCountdown\n  } = useBoolean(false);\n  const resetCountdown = useCallback(() => {\n    stopCountdown();\n    resetCounter();\n  }, [stopCountdown, resetCounter]);\n  const countdownCallback = useCallback(() => {\n    if (count === countStop) {\n      stopCountdown();\n      return;\n    }\n    if (isIncrement) {\n      increment();\n    } else {\n      decrement();\n    }\n  }, [count, countStop, decrement, increment, isIncrement, stopCountdown]);\n  useInterval(countdownCallback, isCountdownRunning ? intervalMs : null);\n  return [count, { startCountdown, stopCountdown, resetCountdown }];\n}\nfunction useEventCallback(fn) {\n  const ref = useRef(() => {\n    throw new Error(\"Cannot call an event handler while rendering.\");\n  });\n  useIsomorphicLayoutEffect(() => {\n    ref.current = fn;\n  }, [fn]);\n  return useCallback((...args) => {\n    var _a;\n    return (_a = ref.current) == null ? void 0 : _a.call(ref, ...args);\n  }, [ref]);\n}\n\n// src/useLocalStorage/useLocalStorage.ts\nvar IS_SERVER = typeof window === \"undefined\";\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER) {\n      console.warn(\n        `Tried setting localStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.localStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"local-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting localStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  const removeValue = useEventCallback(() => {\n    if (IS_SERVER) {\n      console.warn(\n        `Tried removing localStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n    window.localStorage.removeItem(key);\n    setStoredValue(defaultValue);\n    window.dispatchEvent(new StorageEvent(\"local-storage\", { key }));\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return [storedValue, setValue, removeValue];\n}\nvar IS_SERVER2 = typeof window === \"undefined\";\nfunction useMediaQuery(query, {\n  defaultValue = false,\n  initializeWithValue = true\n} = {}) {\n  const getMatches = (query2) => {\n    if (IS_SERVER2) {\n      return defaultValue;\n    }\n    return window.matchMedia(query2).matches;\n  };\n  const [matches, setMatches] = useState(() => {\n    if (initializeWithValue) {\n      return getMatches(query);\n    }\n    return defaultValue;\n  });\n  function handleChange() {\n    setMatches(getMatches(query));\n  }\n  useIsomorphicLayoutEffect(() => {\n    const matchMedia = window.matchMedia(query);\n    handleChange();\n    if (matchMedia.addListener) {\n      matchMedia.addListener(handleChange);\n    } else {\n      matchMedia.addEventListener(\"change\", handleChange);\n    }\n    return () => {\n      if (matchMedia.removeListener) {\n        matchMedia.removeListener(handleChange);\n      } else {\n        matchMedia.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [query]);\n  return matches;\n}\n\n// src/useDarkMode/useDarkMode.ts\nvar COLOR_SCHEME_QUERY = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY = \"usehooks-ts-dark-mode\";\nfunction useDarkMode(options = {}) {\n  const {\n    defaultValue,\n    localStorageKey = LOCAL_STORAGE_KEY,\n    initializeWithValue = true\n  } = options;\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY, {\n    initializeWithValue,\n    defaultValue\n  });\n  const [isDarkMode, setDarkMode] = useLocalStorage(\n    localStorageKey,\n    defaultValue ?? isDarkOS ?? false,\n    { initializeWithValue }\n  );\n  useIsomorphicLayoutEffect(() => {\n    if (isDarkOS !== isDarkMode) {\n      setDarkMode(isDarkOS);\n    }\n  }, [isDarkOS]);\n  return {\n    isDarkMode,\n    toggle: () => {\n      setDarkMode((prev) => !prev);\n    },\n    enable: () => {\n      setDarkMode(true);\n    },\n    disable: () => {\n      setDarkMode(false);\n    },\n    set: (value) => {\n      setDarkMode(value);\n    }\n  };\n}\nfunction useUnmount(func) {\n  const funcRef = useRef(func);\n  funcRef.current = func;\n  useEffect(\n    () => () => {\n      funcRef.current();\n    },\n    []\n  );\n}\n\n// src/useDebounceCallback/useDebounceCallback.ts\nfunction useDebounceCallback(func, delay = 500, options) {\n  const debouncedFunc = useRef();\n  useUnmount(() => {\n    if (debouncedFunc.current) {\n      debouncedFunc.current.cancel();\n    }\n  });\n  const debounced = useMemo(() => {\n    const debouncedFuncInstance = debounce(func, delay, options);\n    const wrappedFunc = (...args) => {\n      return debouncedFuncInstance(...args);\n    };\n    wrappedFunc.cancel = () => {\n      debouncedFuncInstance.cancel();\n    };\n    wrappedFunc.isPending = () => {\n      return !!debouncedFunc.current;\n    };\n    wrappedFunc.flush = () => {\n      return debouncedFuncInstance.flush();\n    };\n    return wrappedFunc;\n  }, [func, delay, options]);\n  useEffect(() => {\n    debouncedFunc.current = debounce(func, delay, options);\n  }, [func, delay, options]);\n  return debounced;\n}\nfunction useDebounceValue(initialValue, delay, options) {\n  const eq = (options == null ? void 0 : options.equalityFn) ?? ((left, right) => left === right);\n  const unwrappedInitialValue = initialValue instanceof Function ? initialValue() : initialValue;\n  const [debouncedValue, setDebouncedValue] = useState(unwrappedInitialValue);\n  const previousValueRef = useRef(unwrappedInitialValue);\n  const updateDebouncedValue = useDebounceCallback(\n    setDebouncedValue,\n    delay,\n    options\n  );\n  if (!eq(previousValueRef.current, unwrappedInitialValue)) {\n    updateDebouncedValue(unwrappedInitialValue);\n    previousValueRef.current = unwrappedInitialValue;\n  }\n  return [debouncedValue, updateDebouncedValue];\n}\nfunction useDocumentTitle(title, options = {}) {\n  const { preserveTitleOnUnmount = true } = options;\n  const defaultTitle = useRef(null);\n  useIsomorphicLayoutEffect(() => {\n    defaultTitle.current = window.document.title;\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    window.document.title = title;\n  }, [title]);\n  useUnmount(() => {\n    if (!preserveTitleOnUnmount && defaultTitle.current) {\n      window.document.title = defaultTitle.current;\n    }\n  });\n}\nfunction useHover(elementRef) {\n  const [value, setValue] = useState(false);\n  const handleMouseEnter = () => {\n    setValue(true);\n  };\n  const handleMouseLeave = () => {\n    setValue(false);\n  };\n  useEventListener(\"mouseenter\", handleMouseEnter, elementRef);\n  useEventListener(\"mouseleave\", handleMouseLeave, elementRef);\n  return value;\n}\nfunction useIntersectionObserver({\n  threshold = 0,\n  root = null,\n  rootMargin = \"0%\",\n  freezeOnceVisible = false,\n  initialIsIntersecting = false,\n  onChange\n} = {}) {\n  var _a;\n  const [ref, setRef] = useState(null);\n  const [state, setState] = useState(() => ({\n    isIntersecting: initialIsIntersecting,\n    entry: void 0\n  }));\n  const callbackRef = useRef();\n  callbackRef.current = onChange;\n  const frozen = ((_a = state.entry) == null ? void 0 : _a.isIntersecting) && freezeOnceVisible;\n  useEffect(() => {\n    if (!ref)\n      return;\n    if (!(\"IntersectionObserver\" in window))\n      return;\n    if (frozen)\n      return;\n    let unobserve;\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const thresholds = Array.isArray(observer.thresholds) ? observer.thresholds : [observer.thresholds];\n        entries.forEach((entry) => {\n          const isIntersecting = entry.isIntersecting && thresholds.some((threshold2) => entry.intersectionRatio >= threshold2);\n          setState({ isIntersecting, entry });\n          if (callbackRef.current) {\n            callbackRef.current(isIntersecting, entry);\n          }\n          if (isIntersecting && freezeOnceVisible && unobserve) {\n            unobserve();\n            unobserve = void 0;\n          }\n        });\n      },\n      { threshold, root, rootMargin }\n    );\n    observer.observe(ref);\n    return () => {\n      observer.disconnect();\n    };\n  }, [\n    ref,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(threshold),\n    root,\n    rootMargin,\n    frozen,\n    freezeOnceVisible\n  ]);\n  const prevRef = useRef(null);\n  useEffect(() => {\n    var _a2;\n    if (!ref && ((_a2 = state.entry) == null ? void 0 : _a2.target) && !freezeOnceVisible && !frozen && prevRef.current !== state.entry.target) {\n      prevRef.current = state.entry.target;\n      setState({ isIntersecting: initialIsIntersecting, entry: void 0 });\n    }\n  }, [ref, state.entry, freezeOnceVisible, frozen, initialIsIntersecting]);\n  const result = [\n    setRef,\n    !!state.isIntersecting,\n    state.entry\n  ];\n  result.ref = result[0];\n  result.isIntersecting = result[1];\n  result.entry = result[2];\n  return result;\n}\nfunction useIsClient() {\n  const [isClient, setClient] = useState(false);\n  useEffect(() => {\n    setClient(true);\n  }, []);\n  return isClient;\n}\nfunction useIsMounted() {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return useCallback(() => isMounted.current, []);\n}\nfunction useMap(initialState = /* @__PURE__ */ new Map()) {\n  const [map, setMap] = useState(new Map(initialState));\n  const actions = {\n    set: useCallback((key, value) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.set(key, value);\n        return copy;\n      });\n    }, []),\n    setAll: useCallback((entries) => {\n      setMap(() => new Map(entries));\n    }, []),\n    remove: useCallback((key) => {\n      setMap((prev) => {\n        const copy = new Map(prev);\n        copy.delete(key);\n        return copy;\n      });\n    }, []),\n    reset: useCallback(() => {\n      setMap(() => /* @__PURE__ */ new Map());\n    }, [])\n  };\n  return [map, actions];\n}\n\n// src/useOnClickOutside/useOnClickOutside.ts\nfunction useOnClickOutside(ref, handler, eventType = \"mousedown\", eventListenerOptions = {}) {\n  useEventListener(\n    eventType,\n    (event) => {\n      const target = event.target;\n      if (!target || !target.isConnected) {\n        return;\n      }\n      const isOutside = Array.isArray(ref) ? ref.filter((r) => Boolean(r.current)).every((r) => r.current && !r.current.contains(target)) : ref.current && !ref.current.contains(target);\n      if (isOutside) {\n        handler(event);\n      }\n    },\n    void 0,\n    eventListenerOptions\n  );\n}\nvar IS_SERVER3 = typeof window === \"undefined\";\nfunction useReadLocalStorage(key, options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER3) {\n    initializeWithValue = false;\n  }\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return null;\n      }\n      return parsed;\n    },\n    [options]\n  );\n  const readValue = useCallback(() => {\n    if (IS_SERVER3) {\n      return null;\n    }\n    try {\n      const raw = window.localStorage.getItem(key);\n      return raw ? deserializer(raw) : null;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \\u201C${key}\\u201D:`, error);\n      return null;\n    }\n  }, [key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return void 0;\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"local-storage\", handleStorageChange);\n  return storedValue;\n}\nvar initialSize = {\n  width: void 0,\n  height: void 0\n};\nfunction useResizeObserver(options) {\n  const { ref, box = \"content-box\" } = options;\n  const [{ width, height }, setSize] = useState(initialSize);\n  const isMounted = useIsMounted();\n  const previousSize = useRef({ ...initialSize });\n  const onResize = useRef(void 0);\n  onResize.current = options.onResize;\n  useEffect(() => {\n    if (!ref.current)\n      return;\n    if (typeof window === \"undefined\" || !(\"ResizeObserver\" in window))\n      return;\n    const observer = new ResizeObserver(([entry]) => {\n      const boxProp = box === \"border-box\" ? \"borderBoxSize\" : box === \"device-pixel-content-box\" ? \"devicePixelContentBoxSize\" : \"contentBoxSize\";\n      const newWidth = extractSize(entry, boxProp, \"inlineSize\");\n      const newHeight = extractSize(entry, boxProp, \"blockSize\");\n      const hasChanged = previousSize.current.width !== newWidth || previousSize.current.height !== newHeight;\n      if (hasChanged) {\n        const newSize = { width: newWidth, height: newHeight };\n        previousSize.current.width = newWidth;\n        previousSize.current.height = newHeight;\n        if (onResize.current) {\n          onResize.current(newSize);\n        } else {\n          if (isMounted()) {\n            setSize(newSize);\n          }\n        }\n      }\n    });\n    observer.observe(ref.current, { box });\n    return () => {\n      observer.disconnect();\n    };\n  }, [box, ref, isMounted]);\n  return { width, height };\n}\nfunction extractSize(entry, box, sizeType) {\n  if (!entry[box]) {\n    if (box === \"contentBoxSize\") {\n      return entry.contentRect[sizeType === \"inlineSize\" ? \"width\" : \"height\"];\n    }\n    return void 0;\n  }\n  return Array.isArray(entry[box]) ? entry[box][0][sizeType] : (\n    // @ts-ignore Support Firefox's non-standard behavior\n    entry[box][sizeType]\n  );\n}\nvar IS_SERVER4 = typeof window === \"undefined\";\nfunction useScreen(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER4) {\n    initializeWithValue = false;\n  }\n  const readScreen = () => {\n    if (IS_SERVER4) {\n      return void 0;\n    }\n    return window.screen;\n  };\n  const [screen, setScreen] = useState(() => {\n    if (initializeWithValue) {\n      return readScreen();\n    }\n    return void 0;\n  });\n  const debouncedSetScreen = useDebounceCallback(\n    setScreen,\n    options.debounceDelay\n  );\n  function handleSize() {\n    const newScreen = readScreen();\n    const setSize = options.debounceDelay ? debouncedSetScreen : setScreen;\n    if (newScreen) {\n      const {\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      } = newScreen;\n      setSize({\n        width,\n        height,\n        availHeight,\n        availWidth,\n        colorDepth,\n        orientation,\n        pixelDepth\n      });\n    }\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return screen;\n}\nvar cachedScriptStatuses = /* @__PURE__ */ new Map();\nfunction getScriptNode(src) {\n  const node = document.querySelector(\n    `script[src=\"${src}\"]`\n  );\n  const status = node == null ? void 0 : node.getAttribute(\"data-status\");\n  return {\n    node,\n    status\n  };\n}\nfunction useScript(src, options) {\n  const [status, setStatus] = useState(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return \"idle\";\n    }\n    if (typeof window === \"undefined\") {\n      return \"loading\";\n    }\n    return cachedScriptStatuses.get(src) ?? \"loading\";\n  });\n  useEffect(() => {\n    if (!src || (options == null ? void 0 : options.shouldPreventLoad)) {\n      return;\n    }\n    const cachedScriptStatus = cachedScriptStatuses.get(src);\n    if (cachedScriptStatus === \"ready\" || cachedScriptStatus === \"error\") {\n      setStatus(cachedScriptStatus);\n      return;\n    }\n    const script = getScriptNode(src);\n    let scriptNode = script.node;\n    if (!scriptNode) {\n      scriptNode = document.createElement(\"script\");\n      scriptNode.src = src;\n      scriptNode.async = true;\n      if (options == null ? void 0 : options.id) {\n        scriptNode.id = options.id;\n      }\n      scriptNode.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(scriptNode);\n      const setAttributeFromEvent = (event) => {\n        const scriptStatus = event.type === \"load\" ? \"ready\" : \"error\";\n        scriptNode == null ? void 0 : scriptNode.setAttribute(\"data-status\", scriptStatus);\n      };\n      scriptNode.addEventListener(\"load\", setAttributeFromEvent);\n      scriptNode.addEventListener(\"error\", setAttributeFromEvent);\n    } else {\n      setStatus(script.status ?? cachedScriptStatus ?? \"loading\");\n    }\n    const setStateFromEvent = (event) => {\n      const newStatus = event.type === \"load\" ? \"ready\" : \"error\";\n      setStatus(newStatus);\n      cachedScriptStatuses.set(src, newStatus);\n    };\n    scriptNode.addEventListener(\"load\", setStateFromEvent);\n    scriptNode.addEventListener(\"error\", setStateFromEvent);\n    return () => {\n      if (scriptNode) {\n        scriptNode.removeEventListener(\"load\", setStateFromEvent);\n        scriptNode.removeEventListener(\"error\", setStateFromEvent);\n      }\n      if (scriptNode && (options == null ? void 0 : options.removeOnUnmount)) {\n        scriptNode.remove();\n        cachedScriptStatuses.delete(src);\n      }\n    };\n  }, [src, options == null ? void 0 : options.shouldPreventLoad, options == null ? void 0 : options.removeOnUnmount, options == null ? void 0 : options.id]);\n  return status;\n}\nvar IS_SERVER5 = typeof window === \"undefined\";\nfunction useScrollLock(options = {}) {\n  const { autoLock = true, lockTarget, widthReflow = true } = options;\n  const [isLocked, setIsLocked] = useState(false);\n  const target = useRef(null);\n  const originalStyle = useRef(null);\n  const lock = () => {\n    if (target.current) {\n      const { overflow, paddingRight } = target.current.style;\n      originalStyle.current = { overflow, paddingRight };\n      if (widthReflow) {\n        const offsetWidth = target.current === document.body ? window.innerWidth : target.current.offsetWidth;\n        const currentPaddingRight = parseInt(window.getComputedStyle(target.current).paddingRight, 10) || 0;\n        const scrollbarWidth = offsetWidth - target.current.scrollWidth;\n        target.current.style.paddingRight = `${scrollbarWidth + currentPaddingRight}px`;\n      }\n      target.current.style.overflow = \"hidden\";\n      setIsLocked(true);\n    }\n  };\n  const unlock = () => {\n    if (target.current && originalStyle.current) {\n      target.current.style.overflow = originalStyle.current.overflow;\n      if (widthReflow) {\n        target.current.style.paddingRight = originalStyle.current.paddingRight;\n      }\n    }\n    setIsLocked(false);\n  };\n  useIsomorphicLayoutEffect(() => {\n    if (IS_SERVER5)\n      return;\n    if (lockTarget) {\n      target.current = typeof lockTarget === \"string\" ? document.querySelector(lockTarget) : lockTarget;\n    }\n    if (!target.current) {\n      target.current = document.body;\n    }\n    if (autoLock) {\n      lock();\n    }\n    return () => {\n      unlock();\n    };\n  }, [autoLock, lockTarget, widthReflow]);\n  return { isLocked, lock, unlock };\n}\nvar IS_SERVER6 = typeof window === \"undefined\";\nfunction useSessionStorage(key, initialValue, options = {}) {\n  const { initializeWithValue = true } = options;\n  const serializer = useCallback(\n    (value) => {\n      if (options.serializer) {\n        return options.serializer(value);\n      }\n      return JSON.stringify(value);\n    },\n    [options]\n  );\n  const deserializer = useCallback(\n    (value) => {\n      if (options.deserializer) {\n        return options.deserializer(value);\n      }\n      if (value === \"undefined\") {\n        return void 0;\n      }\n      const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n      let parsed;\n      try {\n        parsed = JSON.parse(value);\n      } catch (error) {\n        console.error(\"Error parsing JSON:\", error);\n        return defaultValue;\n      }\n      return parsed;\n    },\n    [options, initialValue]\n  );\n  const readValue = useCallback(() => {\n    const initialValueToUse = initialValue instanceof Function ? initialValue() : initialValue;\n    if (IS_SERVER6) {\n      return initialValueToUse;\n    }\n    try {\n      const raw = window.sessionStorage.getItem(key);\n      return raw ? deserializer(raw) : initialValueToUse;\n    } catch (error) {\n      console.warn(`Error reading sessionStorage key \\u201C${key}\\u201D:`, error);\n      return initialValueToUse;\n    }\n  }, [initialValue, key, deserializer]);\n  const [storedValue, setStoredValue] = useState(() => {\n    if (initializeWithValue) {\n      return readValue();\n    }\n    return initialValue instanceof Function ? initialValue() : initialValue;\n  });\n  const setValue = useEventCallback((value) => {\n    if (IS_SERVER6) {\n      console.warn(\n        `Tried setting sessionStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    try {\n      const newValue = value instanceof Function ? value(readValue()) : value;\n      window.sessionStorage.setItem(key, serializer(newValue));\n      setStoredValue(newValue);\n      window.dispatchEvent(new StorageEvent(\"session-storage\", { key }));\n    } catch (error) {\n      console.warn(`Error setting sessionStorage key \\u201C${key}\\u201D:`, error);\n    }\n  });\n  const removeValue = useEventCallback(() => {\n    if (IS_SERVER6) {\n      console.warn(\n        `Tried removing sessionStorage key \\u201C${key}\\u201D even though environment is not a client`\n      );\n    }\n    const defaultValue = initialValue instanceof Function ? initialValue() : initialValue;\n    window.sessionStorage.removeItem(key);\n    setStoredValue(defaultValue);\n    window.dispatchEvent(new StorageEvent(\"session-storage\", { key }));\n  });\n  useEffect(() => {\n    setStoredValue(readValue());\n  }, [key]);\n  const handleStorageChange = useCallback(\n    (event) => {\n      if (event.key && event.key !== key) {\n        return;\n      }\n      setStoredValue(readValue());\n    },\n    [key, readValue]\n  );\n  useEventListener(\"storage\", handleStorageChange);\n  useEventListener(\"session-storage\", handleStorageChange);\n  return [storedValue, setValue, removeValue];\n}\nfunction useStep(maxStep) {\n  const [currentStep, setCurrentStep] = useState(1);\n  const canGoToNextStep = currentStep + 1 <= maxStep;\n  const canGoToPrevStep = currentStep - 1 > 0;\n  const setStep = useCallback(\n    (step) => {\n      const newStep = step instanceof Function ? step(currentStep) : step;\n      if (newStep >= 1 && newStep <= maxStep) {\n        setCurrentStep(newStep);\n        return;\n      }\n      throw new Error(\"Step not valid\");\n    },\n    [maxStep, currentStep]\n  );\n  const goToNextStep = useCallback(() => {\n    if (canGoToNextStep) {\n      setCurrentStep((step) => step + 1);\n    }\n  }, [canGoToNextStep]);\n  const goToPrevStep = useCallback(() => {\n    if (canGoToPrevStep) {\n      setCurrentStep((step) => step - 1);\n    }\n  }, [canGoToPrevStep]);\n  const reset = useCallback(() => {\n    setCurrentStep(1);\n  }, []);\n  return [\n    currentStep,\n    {\n      goToNextStep,\n      goToPrevStep,\n      canGoToNextStep,\n      canGoToPrevStep,\n      setStep,\n      reset\n    }\n  ];\n}\n\n// src/useTernaryDarkMode/useTernaryDarkMode.ts\nvar COLOR_SCHEME_QUERY2 = \"(prefers-color-scheme: dark)\";\nvar LOCAL_STORAGE_KEY2 = \"usehooks-ts-ternary-dark-mode\";\nfunction useTernaryDarkMode({\n  defaultValue = \"system\",\n  localStorageKey = LOCAL_STORAGE_KEY2,\n  initializeWithValue = true\n} = {}) {\n  const isDarkOS = useMediaQuery(COLOR_SCHEME_QUERY2, { initializeWithValue });\n  const [mode, setMode] = useLocalStorage(localStorageKey, defaultValue, {\n    initializeWithValue\n  });\n  const isDarkMode = mode === \"dark\" || mode === \"system\" && isDarkOS;\n  const toggleTernaryDarkMode = () => {\n    const modes = [\"light\", \"system\", \"dark\"];\n    setMode((prevMode) => {\n      const nextIndex = (modes.indexOf(prevMode) + 1) % modes.length;\n      return modes[nextIndex];\n    });\n  };\n  return {\n    isDarkMode,\n    ternaryDarkMode: mode,\n    setTernaryDarkMode: setMode,\n    toggleTernaryDarkMode\n  };\n}\nfunction useTimeout(callback, delay) {\n  const savedCallback = useRef(callback);\n  useIsomorphicLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    if (!delay && delay !== 0) {\n      return;\n    }\n    const id = setTimeout(() => {\n      savedCallback.current();\n    }, delay);\n    return () => {\n      clearTimeout(id);\n    };\n  }, [delay]);\n}\nfunction useToggle(defaultValue) {\n  const [value, setValue] = useState(!!defaultValue);\n  const toggle = useCallback(() => {\n    setValue((x) => !x);\n  }, []);\n  return [value, toggle, setValue];\n}\nvar IS_SERVER7 = typeof window === \"undefined\";\nfunction useWindowSize(options = {}) {\n  let { initializeWithValue = true } = options;\n  if (IS_SERVER7) {\n    initializeWithValue = false;\n  }\n  const [windowSize, setWindowSize] = useState(() => {\n    if (initializeWithValue) {\n      return {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    }\n    return {\n      width: void 0,\n      height: void 0\n    };\n  });\n  const debouncedSetWindowSize = useDebounceCallback(\n    setWindowSize,\n    options.debounceDelay\n  );\n  function handleSize() {\n    const setSize = options.debounceDelay ? debouncedSetWindowSize : setWindowSize;\n    setSize({\n      width: window.innerWidth,\n      height: window.innerHeight\n    });\n  }\n  useEventListener(\"resize\", handleSize);\n  useIsomorphicLayoutEffect(() => {\n    handleSize();\n  }, []);\n  return windowSize;\n}\n\nexport { useBoolean, useClickAnyWhere, useCopyToClipboard, useCountdown, useCounter, useDarkMode, useDebounceCallback, useDebounceValue, useDocumentTitle, useEventCallback, useEventListener, useHover, useIntersectionObserver, useInterval, useIsClient, useIsMounted, useIsomorphicLayoutEffect, useLocalStorage, useMap, useMediaQuery, useOnClickOutside, useReadLocalStorage, useResizeObserver, useScreen, useScript, useScrollLock, useSessionStorage, useStep, useTernaryDarkMode, useTimeout, useToggle, useUnmount, useWindowSize };\n", "export function px(value: number) {\n  return `${value}px`\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { px } from '../utils'\n\nconst Styles = styled.div`\n    position: absolute;\n    background: rgba(110, 136, 255, 0.8);\n    border: 1px solid rgb(192 206 212 / 60%);\n`\n\nexport function MiniNode(props: { left: number, top: number, width: number, height: number }) {\n  return <Styles style={{\n    left: px(props.left),\n    top: px(props.top),\n    width: px(props.width),\n    height: px(props.height)\n  }} data-testid=\"minimap-node\"/>\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDrag } from '../../../shared/drag'\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\n\nconst MiniViewportStyles = styled.div`\n  position: absolute;\n  background: rgba(255, 251, 128, 0.32);\n  border: 1px solid #ffe52b;\n`\n\nexport function MiniViewport(props: Rect & { containerWidth: number, start(): Transform, translate: Translate }) {\n  const scale = (v: number) => v * props.containerWidth\n  const invert = (v: number) => v / props.containerWidth\n  const drag = useDrag((dx, dy) => {\n    props.translate(invert(-dx), invert(-dy))\n  }, e => ({ x: e.pageX, y: e.pageY }))\n\n  return <MiniViewportStyles\n    onPointerDown={drag.start}\n    style={{\n      left: px(scale(props.left)),\n      top: px(scale(props.top)),\n      width: px(scale(props.width)),\n      height: px(scale(props.height))\n    }}\n    data-testid=\"minimap-viewport\"\n  />\n}\n", "import * as React from 'react'\nimport { useCallback, useRef } from 'react'\nimport styled from 'styled-components'\nimport { useResizeObserver } from 'usehooks-ts'\n\nimport { Rect, Transform, Translate } from '../types'\nimport { px } from '../utils'\nimport { MiniNode } from './MiniNode'\nimport { MiniViewport } from './MiniViewport'\n\nconst Styles = styled.div<{ size: number }>`\n    position: absolute;\n    right: 24px;\n    bottom: 24px;\n    background: rgba(229, 234, 239, 0.65);\n    padding: 20px;\n    overflow: hidden;\n    border: 1px solid #b1b7ff;\n    border-radius: 8px;\n    box-sizing: border-box;\n`\n\ntype Props = {\n  size: number\n  ratio: number\n  nodes: Rect[]\n  viewport: Rect\n  start(): Transform\n  translate: Translate\n  point(x: number, y: number): void\n}\n\nexport function Minimap(props: Props) {\n  const ref = useRef<HTMLDivElement>(null)\n  const { width = 0 } = useResizeObserver({\n    ref\n  })\n  const containerWidth = ref.current?.clientWidth || width\n  const scale = useCallback((v: number) => v * containerWidth, [containerWidth])\n\n  return <Styles\n    size={props.size}\n    style={{\n      width: px(props.size * props.ratio),\n      height: px(props.size)\n    }}\n    onPointerDown={e => {\n      e.stopPropagation()\n      e.preventDefault()\n    }}\n    onDoubleClick={e => {\n      e.stopPropagation()\n      e.preventDefault()\n      if (!ref.current) return\n      const box = ref.current.getBoundingClientRect()\n      const x = (e.clientX - box.left) / (props.size * props.ratio)\n      const y = (e.clientY - box.top) / (props.size * props.ratio)\n\n      props.point(x, y)\n    }}\n    ref={ref}\n    data-testid=\"minimap\"\n  >\n    {containerWidth\n      ? props.nodes.map((node, i) => <MiniNode\n        key={i}\n        left={scale(node.left)}\n        top={scale(node.top)}\n        width={scale(node.width)}\n        height={scale(node.height)}\n      />)\n      : null}\n    <MiniViewport\n      {...props.viewport}\n      start={props.start}\n      containerWidth={containerWidth}\n      translate={props.translate}\n    />\n  </Styles>\n}\n", "import * as React from 'react'\nimport { BaseSchemes } from 'rete'\n\nimport { RenderPreset } from '../types'\nimport { Minimap } from './components/Minimap'\nimport { MinimapRender } from './types'\n\n/**\n * Preset for rendering minimap.\n */\nexport function setup<Schemes extends BaseSchemes, K extends MinimapRender>(props?: { size?: number }): RenderPreset<Schemes, K> {\n  return {\n    render(context) {\n      if (context.data.type === 'minimap') {\n        return <Minimap\n          nodes={context.data.nodes}\n          size={props?.size || 200}\n          ratio={context.data.ratio}\n          viewport={context.data.viewport}\n          start={context.data.start}\n          translate={context.data.translate}\n          point={context.data.point}\n        />\n      }\n    }\n  }\n}\n", "import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { useDrag } from '../../shared/drag'\nimport { Position } from '../../types'\nimport { Pin as PinType } from './types'\n\nconst pinSize = 20\n\nconst Styles = styled.div<{ selected?: boolean }>`\n  width: ${pinSize}px;\n  height: ${pinSize}px;\n  box-sizing: border-box;\n  background: ${props => props.selected\n    ? '#ffd92c'\n    : 'steelblue'};\n  border: 2px solid white;\n  border-radius: ${pinSize}px;\n`\n\ntype Props = PinType & {\n  contextMenu(): void\n  translate(dx: number, dy: number): void\n  pointerdown(): void\n  pointer(): Position\n}\n\nexport function Pin(props: Props) {\n  const drag = useDrag((dx, dy) => {\n    props.translate(dx, dy)\n  }, props.pointer)\n  const { x, y } = props.position\n\n  return (\n    <Styles\n      onPointerDown={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        drag.start(e)\n        props.pointerdown()\n      }}\n      onContextMenu={e => {\n        e.stopPropagation()\n        e.preventDefault()\n        props.contextMenu()\n      }}\n      selected={props.selected}\n      style={{ position: 'absolute', top: `${y - pinSize / 2}px`, left: `${x - pinSize / 2}px` }}\n      data-testid=\"pin\"\n    >\n\n    </Styles>\n  )\n}\n", "\nimport * as React from 'react'\nimport { BaseSchemes } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { Position } from '../../types'\nimport { RenderPreset } from '../types'\nimport { Pin } from './Pin'\nimport { PinData, PinsRender } from './types'\n\ntype Props = {\n  translate?: (id: string, dx: number, dy: number) => void\n  contextMenu?: (id: string) => void\n  pointerdown?: (id: string) => void\n}\n\n/**\n * Preset for rendering pins.\n */\nexport function setup<Schemes extends BaseSchemes, K extends PinsRender>(props?: Props): RenderPreset<Schemes, K> {\n  function renderPins(data: PinData, pointer: () => Position) {\n    return <>\n      {data.pins.map(pin => (\n        <Pin\n          {...pin}\n          key={pin.id}\n          contextMenu={() => props?.contextMenu && props.contextMenu(pin.id)}\n          translate={(dx, dy) => props?.translate && props.translate(pin.id, dx, dy)}\n          pointerdown={() => props?.pointerdown && props.pointerdown(pin.id)}\n          pointer={pointer}\n        />\n      ))}\n    </>\n  }\n\n  return {\n    render(context, plugin) {\n      const data = context.data\n      const area = plugin.parentScope<BaseAreaPlugin<Schemes, PinsRender>>(BaseAreaPlugin)\n\n      if (data.type === 'reroute-pins') {\n        return renderPins(data.data, () => area.area.pointer)\n      }\n    }\n  }\n}\n", "/**\n * Built-in presets, responsible for rendering different parts of the editor.\n * @module\n */\nexport * as classic from './classic'\nexport * as contextMenu from './context-menu'\nexport * as minimap from './minimap'\nexport * as reroute from './reroute-pins'\n", "import * as React from 'react'\nimport { BaseSchemes, CanAssignSignal, Scope } from 'rete'\n\nimport { RenderPreset } from './presets/types'\nimport { getRenderer, Renderer } from './renderer'\nimport { Position, RenderSignal } from './types'\nimport { Root } from './utils'\n\nexport * as Presets from './presets'\nexport type { ClassicScheme, ReactArea2D, RenderEmit } from './presets/classic'\nexport { RefComponent } from './ref-component'\nexport * from './shared'\nexport * from './types'\nexport { useRete } from './utils'\n\n/**\n * Signals that can be emitted by the plugin\n * @priority 9\n */\nexport type Produces<Schemes extends BaseSchemes> =\n  | { type: 'connectionpath', data: { payload: Schemes['Connection'], path?: string, points: Position[] } }\n\ntype Requires<Schemes extends BaseSchemes> =\n  | RenderSignal<'node', { payload: Schemes['Node'] }>\n  | RenderSignal<'connection', { payload: Schemes['Connection'], start?: Position, end?: Position }>\n  | { type: 'unmount', data: { element: HTMLElement } }\n\n/**\n * Plugin props\n */\nexport type Props = {\n  /** root factory for React.js 18+ */\n  createRoot?: (container: Element | DocumentFragment) => any\n}\n\n/**\n * React plugin. Renders nodes, connections and other elements using React.\n * @priority 10\n * @emits connectionpath\n * @listens render\n * @listens unmount\n */\nexport class ReactPlugin<Schemes extends BaseSchemes, T = Requires<Schemes>> extends Scope<Produces<Schemes>, [Requires<Schemes> | T]> {\n  renderer: Renderer\n  presets: RenderPreset<Schemes, T>[] = []\n\n  constructor(props?: Props) {\n    super('react-render')\n    this.renderer = getRenderer({ createRoot: props?.createRoot })\n\n    this.addPipe(context => {\n      if (!context || typeof context !== 'object' || !('type' in context)) return context\n      if (context.type === 'unmount') {\n        this.unmount(context.data.element)\n      } else if (context.type === 'render') {\n        if ('filled' in context.data && context.data.filled) {\n          return context\n        }\n        if (this.mount(context.data.element, context)) {\n          return {\n            ...context,\n            data: {\n              ...context.data,\n              filled: true\n            }\n          } as typeof context\n        }\n      }\n\n      return context\n    })\n  }\n\n  setParent(scope: Scope<Requires<Schemes> | T>): void {\n    super.setParent(scope)\n\n    this.presets.forEach(preset => {\n      if (preset.attach) preset.attach(this)\n    })\n  }\n\n  private mount(element: HTMLElement, context: Requires<Schemes>) {\n    const parent = this.parentScope()\n\n    for (const preset of this.presets) {\n      const result = preset.render(context as any, this)\n\n      if (!result) continue\n\n      const reactElement = (\n        <Root rendered={() => void parent.emit({ type: 'rendered', data: context.data } as T)}>\n          {result}\n        </Root>\n      )\n\n      this.renderer.mount(reactElement, element)\n      return true\n    }\n  }\n\n  private unmount(element: HTMLElement) {\n    this.renderer.unmount(element)\n  }\n\n  /**\n   * Adds a preset to the plugin.\n   * @param preset Preset that can render nodes, connections and other elements.\n   */\n  public addPreset<K>(preset: RenderPreset<Schemes, CanAssignSignal<T, K> extends true ? K : 'Cannot apply preset. Provided signals are not compatible'>) {\n    const local = preset as RenderPreset<Schemes, T>\n\n    if (local.attach) local.attach(this)\n    this.presets.push(local)\n  }\n}\n"],
  "mappings": "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",
  "names": ["getRenderer", "props", "createRoot", "wrappers", "WeakMap", "getWrapper", "container", "wrapper", "get", "span", "document", "createElement", "appendChild", "set", "removeWrapper", "remove", "roots", "mount", "element", "has", "root", "render", "unmount", "ReactDOM", "unmountComponentAtNode", "Root", "_ref", "children", "rendered", "useEffect", "syncFlush", "ready", "useRef", "current", "apply", "f", "queueMicrotask", "flushSync", "useRete", "create", "_useState", "useState", "_useState2", "_slicedToArray", "setContainer", "editorRef", "_useState3", "_useState4", "editor", "setEditor", "ref", "destroy", "innerHTML", "then", "value", "ConnectionContext", "createContext", "start", "end", "path", "ConnectionWrapper", "computedStart", "setStart", "computedEnd", "setEnd", "_useState5", "_useState6", "setPath", "flush", "unwatch1", "s", "unwatch2", "p", "Provider", "useConnection", "useContext", "Svg", "styled", "svg", "_templateObject", "_taggedTemplateLiteral", "Path", "_templateObject2", "_props$styles", "styles", "call", "Connection", "_useConnection", "d", "copyEvent", "e", "newEvent", "constructor", "type", "Object", "getPrototypeOf", "keys", "getOwnPropertyNames", "_iterator", "_createForOfIteratorHelper", "_step", "n", "done", "k", "item", "defineProperty", "err", "rootPrefix", "findReactRoot", "_reactRootContainer", "some", "key", "startsWith", "parentElement", "useDrag", "translate", "getPointer", "previous", "_objectSpread", "move", "moveEvent", "dx", "x", "dy", "y", "up", "window", "removeEventListener", "addEventListener", "useNoDrag", "disabled", "React", "handleClick", "target", "version", "stopPropagation", "dispatchEvent", "el", "NoDrag", "Input", "input", "Control", "_React$useState", "data", "_React$useState2", "setValue", "Drag", "readOnly", "readonly", "onChange", "val", "$nodecolor", "$nodecolorselected", "$socketsize", "$socketmargin", "$socketcolor", "$nodewidth", "RefComponent", "init", "_objectWithoutProperties", "_excluded", "_extends", "RefControl", "name", "emit", "payload", "className", "RefSocket", "nodeId", "side", "socketKey", "NodeStyles", "div", "Number", "isFinite", "width", "concat", "height", "selected", "css", "sortByIndex", "entries", "sort", "a", "b", "_a$", "_b$", "ai", "index", "bi", "Node", "inputs", "outputs", "controls", "_props$data", "id", "label", "map", "_ref2", "output", "socket", "_ref3", "_ref4", "control", "_ref5", "_ref6", "showControl", "Styles", "Hoverable", "Socket", "title", "setup", "positionWatcher", "socketPositionWatcher", "getDOMSocketPosition", "customize", "node", "connection", "attach", "plugin", "context", "parent", "parentScope", "Component", "sourceOutput", "targetInput", "source", "change", "listen", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "response", "_response$data", "points", "curvature", "wrap", "_callee$", "_context", "prev", "next", "sent", "abrupt", "length", "Error", "isLoop", "loopConnectionPath", "classicConnectionPath", "stop", "_x", "_x2", "arguments", "_Component", "_Component2", "ClassicPreset", "InputControl", "_Component3", "useDebounce", "cb", "timeout", "cancel", "clearTimeout", "func", "setTimeout", "$contextColor", "$contextColorLight", "$contextColorDark", "$contextMenuRound", "$width", "CommonStyle", "ItemStyle", "hasSubitems", "SubitemStyles", "_templateObject3", "ItemElement", "_props$components", "_props$components$ite", "_props$components2", "_props$components2$su", "visibleSubitems", "setVisibleSubitems", "setInvisibile", "useCallback", "_useDebounce", "delay", "_useDebounce2", "hide", "cancelHide", "components", "Subitems", "subitems", "onClick", "handler", "Boolean", "onPointerDown", "onPointerOver", "onPointerLeave", "SearchInput", "Search", "component", "onInput", "Menu", "_props$components$mai", "_props$components2$co", "_props$components3", "_props$components3$se", "onHide", "filter", "setFilter", "filterRegexp", "RegExp", "filteredList", "items", "match", "main", "Common", "common", "onMouseOver", "onMouseLeave", "onWheel", "searchBar", "search", "global", "px", "MiniNode", "style", "left", "top", "MiniViewportStyles", "MiniViewport", "scale", "v", "containerWidth", "invert", "drag", "pageX", "pageY", "Minimap", "_ref$current", "_useResizeObserver", "useResizeObserver", "_useResizeObserver$wi", "clientWidth", "size", "ratio", "preventDefault", "onDoubleClick", "box", "getBoundingClientRect", "clientX", "clientY", "point", "nodes", "i", "viewport", "pinSize", "Pin", "pointer", "_props$position", "position", "pointerdown", "onContextMenu", "contextMenu", "renderPins", "Fragment", "pins", "pin", "area", "BaseAreaPlugin", "ReactPlugin", "_Scope", "_this", "_classCallCheck", "_callSuper", "_defineProperty", "renderer", "addPipe", "_typeof", "filled", "_inherits", "_createClass", "setParent", "scope", "_this2", "_superPropGet", "presets", "forEach", "preset", "result", "reactElement", "addPreset", "local", "push", "Scope"]
}
