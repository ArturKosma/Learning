{
  "version": 3,
  "sources": ["../../../animFlex/graph/node_modules/rete-render-utils/src/connection.ts", "../../../animFlex/graph/node_modules/rete-render-utils/src/utils.ts", "../../../animFlex/graph/node_modules/rete-render-utils/src/sockets-position/storage.ts", "../../../animFlex/graph/node_modules/rete-render-utils/src/sockets-position/base-socket-position.ts", "../../../animFlex/graph/node_modules/rete-render-utils/src/sockets-position/dom-socket-position.ts"],
  "sourcesContent": ["import { Position } from './types'\n\n/**\n * Get classic SVG path for a connection between two points.\n * @param points Array of two points\n * @param curvature Curvature of the connection\n */\nexport function classicConnectionPath(points: [Position, Position], curvature: number) {\n  const [{ x: x1, y: y1 }, { x: x2, y: y2 }] = points\n  const vertical = Math.abs(y1 - y2)\n  const hx1 = x1 + Math.max(vertical / 2, Math.abs(x2 - x1)) * curvature\n  const hx2 = x2 - Math.max(vertical / 2, Math.abs(x2 - x1)) * curvature\n\n  return `M ${x1} ${y1} C ${hx1} ${y1} ${hx2} ${y2} ${x2} ${y2}`\n}\n\n/**\n * Get loop SVG path for a connection between two points.\n * @param points Array of two points\n * @param curvature Curvature of the loop\n * @param size Size of the loop\n */\nexport function loopConnectionPath(points: [Position, Position], curvature: number, size: number) {\n  const [{ x: x1, y: y1 }, { x: x2, y: y2 }] = points\n  const k = y2 > y1\n    ? 1\n    : -1\n  const scale = size + Math.abs(x1 - x2) / (size / 2)\n  const middleX = (x1 + x2) / 2\n  const middleY = y1 - k * scale\n  const vertical = (y2 - y1) * curvature\n\n  return `\n        M ${x1} ${y1}\n        C ${x1 + scale} ${y1}\n        ${x1 + scale} ${middleY - vertical}\n        ${middleX} ${middleY}\n        C ${x2 - scale} ${middleY + vertical}\n        ${x2 - scale} ${y2}\n        ${x2} ${y2}\n    `\n}\n", "/* eslint-disable max-statements */\n\n/**\n * Calculates the center coordinates of a child element relative to a parent element.\n * @async\n * @param child The child element whose center coordinates need to be calculated.\n * @param parent The parent element relative to which the child element's center is calculated.\n * @returns Position of the child element's center\n * @throws Error if the child element has a null offsetParent.\n */\nexport async function getElementCenter(child: HTMLElement, parent: HTMLElement) {\n  while (!child.offsetParent) {\n    await new Promise(res => setTimeout(res, 0))\n  }\n\n  let x = child.offsetLeft\n  let y = child.offsetTop\n  let currentElement = child.offsetParent as HTMLElement | null\n\n  if (!currentElement) throw new Error('child has null offsetParent')\n\n  while (currentElement !== null && currentElement !== parent) {\n    x += currentElement.offsetLeft + currentElement.clientLeft\n    y += currentElement.offsetTop + currentElement.clientTop\n    currentElement = currentElement.offsetParent as HTMLElement | null\n  }\n  const width = child.offsetWidth\n  const height = child.offsetHeight\n\n  return {\n    x: x + width / 2,\n    y: y + height / 2\n  }\n}\nexport class EventEmitter<T> {\n  listeners = new Set<(data: T) => void>()\n\n  emit(data: T) {\n    this.listeners.forEach(listener => {\n      listener(data)\n    })\n  }\n\n  listen(handler: (data: T) => void) {\n    this.listeners.add(handler)\n\n    return () => {\n      this.listeners.delete(handler)\n    }\n  }\n}\n", "import { Position, Side } from '../types'\n\ntype SocketPayload = {\n  element: HTMLElement\n  side: Side\n  key: string\n  nodeId: string\n  position: Position // relative to node\n}\n\nexport class SocketsPositionsStorage {\n  elements = new Map<HTMLElement, SocketPayload[]>()\n\n  getPosition(data: { nodeId: string, key: string, side: Side }) {\n    const list = Array.from(this.elements.values()).flat()\n    const found = list.filter(item => {\n      return item.side === data.side && item.nodeId === data.nodeId && item.key === data.key\n    })\n\n    // eslint-disable-next-line no-console\n    if (found.length > 1) console.warn([\n      'Found more than one element for socket with same key and side.',\n      'Probably it was not unmounted correctly'\n    ].join(' '), data)\n\n    return found.pop()?.position ?? null\n  }\n\n  add(data: SocketPayload) {\n    const existing = this.elements.get(data.element)\n\n    this.elements.set(data.element, existing\n      ? [\n        ...existing.filter(n => !(n.nodeId === data.nodeId && n.key === data.key && n.side === data.side)), data\n      ]\n      : [data])\n  }\n\n  remove(element: SocketPayload['element']) {\n    this.elements.delete(element)\n  }\n\n  snapshot() {\n    return Array.from(this.elements.values()).flat()\n  }\n}\n", "import { BaseSchemes, NodeId, Scope } from 'rete'\nimport { BaseAreaPlugin } from 'rete-area-plugin'\n\nimport { ExpectArea2DExtra, Position, Side } from '../types'\nimport { EventEmitter } from '../utils'\nimport { SocketsPositionsStorage } from './storage'\nimport { OnChange, SocketPositionWatcher } from './types'\n\ntype ListenerData = {\n  nodeId: string\n  side?: Side\n  key?: string\n}\n\n/**\n * Abstract class for socket position calculation. It can be extended to implement custom socket position calculation.\n * @abstract\n * @listens render\n * @listens rendered\n * @listens unmount\n * @listens nodetranslated\n * @listens noderesized\n */\nexport abstract class BaseSocketPosition<Schemes extends BaseSchemes, K> implements SocketPositionWatcher<Scope<never, [K]>> {\n  sockets = new SocketsPositionsStorage()\n  emitter = new EventEmitter<ListenerData>()\n  area: BaseAreaPlugin<Schemes, ExpectArea2DExtra<Schemes>> | null = null\n\n  /**\n   * The method needs to be implemented that calculates the position of the socket.\n   * @param nodeId Node ID\n   * @param side Side of the socket, 'input' or 'output'\n   * @param key Socket key\n   * @param element Socket element\n   */\n  abstract calculatePosition(nodeId: string, side: Side, key: string, element: HTMLElement): Promise<Position | null>\n\n  /**\n   * Attach the watcher to the area's child scope.\n   * @param scope Scope of the watcher that should be a child of `BaseAreaPlugin`\n   */\n  attach(scope: Scope<never, [K]>) {\n    if (this.area) return\n    if (!scope.hasParent()) return\n    this.area = scope.parentScope<BaseAreaPlugin<Schemes, ExpectArea2DExtra<Schemes>>>(BaseAreaPlugin)\n\n    // eslint-disable-next-line max-statements\n    this.area.addPipe(async context => {\n      if (context.type === 'rendered' && context.data.type === 'socket') {\n        const { nodeId, key, side, element } = context.data\n\n        const position = await this.calculatePosition(nodeId, side, key, element)\n\n        if (position) {\n          this.sockets.add({ nodeId, key, side, element, position })\n          this.emitter.emit({ nodeId, key, side })\n        }\n      } else if (context.type === 'unmount') {\n        this.sockets.remove(context.data.element)\n      } else if (context.type === 'nodetranslated') {\n        this.emitter.emit({ nodeId: context.data.id })\n      } else if (context.type === 'noderesized') {\n        const { id: nodeId } = context.data\n\n        await Promise.all(this.sockets.snapshot()\n          .filter(item => item.nodeId === context.data.id && item.side === 'output')\n          .map(async item => {\n            const { side, key, element } = item\n            const position = await this.calculatePosition(nodeId, side, key, element)\n\n            if (position) {\n              item.position = position\n            }\n          }))\n        this.emitter.emit({ nodeId })\n      } else if (context.type === 'render' && context.data.type === 'connection') {\n        const { source, target } = context.data.payload\n        const nodeId = source || target\n\n        this.emitter.emit({ nodeId })\n      }\n      return context\n    })\n  }\n\n  /**\n   * Listen to socket position changes. Usually used by rendering plugins to update the start/end of the connection.\n   * @internal\n   * @param nodeId Node ID\n   * @param side Side of the socket, 'input' or 'output'\n   * @param key Socket key\n   * @param change Callback function that is called when the socket position changes\n   */\n  listen(nodeId: NodeId, side: Side, key: string, change: OnChange) {\n    const unlisten = this.emitter.listen((data: ListenerData) => {\n      if (data.nodeId !== nodeId) return\n      if ((!data.key || data.side === side) && (!data.side || data.key === key)) {\n        const position = this.sockets.getPosition({ side, nodeId, key })\n\n        if (!position) return\n\n        const { x, y } = position\n        const nodeView = this.area?.nodeViews.get(nodeId)\n\n        if (nodeView) change({\n          x: x + nodeView.position.x,\n          y: y + nodeView.position.y\n        })\n      }\n    })\n\n    this.sockets.snapshot().forEach(data => {\n      if (data.nodeId === nodeId) this.emitter.emit(data)\n    })\n    return unlisten\n  }\n}\n", "import { BaseSchemes } from 'rete'\n\nimport { Position, Side } from '../types'\nimport { getElementCenter } from '../utils'\nimport { BaseSocketPosition } from './base-socket-position'\n\n/**\n * Props for `DOMSocketPosition` class.\n */\nexport type Props = {\n  /**\n   * Allows to customize the position of the socket. By default, the position is shifted by 12px on the x-axis relative to the center of the socket.\n   * @param position Center position of the socket\n   * @param nodeId Node ID\n   * @param side Side of the socket, 'input' or 'output'\n   * @param key Socket key\n   * @returns Custom position of the socket\n   */\n  offset?: (position: Position, nodeId: string, side: Side, key: string) => Position\n}\n\n/**\n * Class for socket position calculation based on DOM elements. It uses `getElementCenter` function to calculate the position.\n */\nexport class DOMSocketPosition<Schemes extends BaseSchemes, K> extends BaseSocketPosition<Schemes, K> {\n  constructor(private props?: Props) {\n    super()\n  }\n\n  async calculatePosition(nodeId: string, side: Side, key: string, element: HTMLElement) {\n    const view = this.area?.nodeViews.get(nodeId)\n\n    if (!view?.element) return null\n    const position = await getElementCenter(element, view.element)\n\n    if (this.props?.offset) return this.props.offset(position, nodeId, side, key)\n\n    return {\n      x: position.x + 12 * (side === 'input'\n        ? -1\n        : 1),\n      y: position.y\n    }\n  }\n}\n\n/**\n * Wrapper function for `DOMSocketPosition` class.\n * @param props Props for `DOMSocketPosition` class\n */\nexport function getDOMSocketPosition<Schemes extends BaseSchemes, K>(props?: Props) {\n  return new DOMSocketPosition<Schemes, K>(props)\n}\n"],
  "mappings": "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",
  "names": ["classicConnectionPath", "points", "curvature", "_points", "_slicedToArray", "_points$", "x1", "x", "y1", "y", "_points$2", "x2", "y2", "vertical", "Math", "abs", "hx1", "max", "hx2", "concat", "loopConnectionPath", "size", "_points2", "_points2$", "_points2$2", "k", "scale", "middleX", "middleY", "getElementCenter", "_x", "_x2", "_getElementCenter", "apply", "arguments", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "child", "parent", "currentElement", "width", "height", "wrap", "_callee$", "_context", "prev", "next", "offsetParent", "Promise", "res", "setTimeout", "offsetLeft", "offsetTop", "Error", "clientLeft", "clientTop", "offsetWidth", "offsetHeight", "abrupt", "stop", "EventEmitter", "_classCallCheck", "_defineProperty", "Set", "_createClass", "key", "value", "emit", "data", "listeners", "forEach", "listener", "listen", "handler", "_this", "add", "SocketsPositionsStorage", "Map", "getPosition", "_found$pop$position", "_found$pop", "list", "Array", "from", "elements", "values", "flat", "found", "filter", "item", "side", "nodeId", "length", "console", "warn", "join", "pop", "position", "existing", "get", "element", "set", "_toConsumableArray", "n", "remove", "snapshot", "BaseSocketPosition", "attach", "scope", "area", "hasParent", "parentScope", "BaseAreaPlugin", "addPipe", "_ref", "_callee2", "context", "_context$data", "_nodeId", "_key", "_side", "_element", "_nodeId2", "_context$data$payload", "source", "target", "_nodeId3", "_callee2$", "_context2", "type", "calculatePosition", "sent", "sockets", "emitter", "id", "all", "map", "_ref2", "payload", "change", "_this2", "unlisten", "_this2$area", "nodeView", "nodeViews", "DOMSocketPosition", "_BaseSocketPosition", "props", "_callSuper", "_inherits", "_calculatePosition", "_this$area", "_this$props", "view", "offset", "_x3", "_x4", "getDOMSocketPosition"]
}
